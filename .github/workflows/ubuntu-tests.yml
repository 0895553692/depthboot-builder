name: Testing Ubuntu
on:
  workflow_run:
    workflows:
      - "Starting tests"
    types:
      - completed
  workflow_dispatch:

jobs:
  test-ubuntu:
    runs-on: ubuntu-22.04
    steps:
      - name: Checking out repository code
        uses: actions/checkout@v3
        with:
          fetch-depth: 1

      - name: Installing dependencies
        runs: sudo apt-get install -y cgpt vboot-kernel-utils

      - name: Building Ubuntu + Gnome
        run: python3 -c "import build; build.build()"